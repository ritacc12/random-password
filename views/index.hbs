<link href="/stylesheets/index.css" rel="stylesheet">

<header class="header d-flex justify-content-center sticky-top">
    <h2>Random Password Generator</h2>
</header>
<!-- As a heading -->


<div class="container mt-10">
        <div class="d-flex justify-content-center">
            <h5 class="shadow p-3 mb-3 bg-body-tertiary rounded" id="title"><i>Please choose the password type</i></h5>
        </div>
    <form class="form d-flex align-items-center needs-validation" method="POST" action="/" novalidate>
        <div class="row mb-3">
            <label for="length" class="col-sm-2  col-form-label">Password Length</label>
            <div class="col-sm-10 mt-10 p-3">
                <input type="number" class="form-control" id="length" aria-describedby="passwordHelp" min="4" max="16" name="length" required>
                <div id="passwordHelp" class="form-text passwordHelp">Length is available between 4 ~ 16
                </div>
        </div>
        <div class="row mb-3" id="passwordHelp">
            <div class="valid-feedback">
                Looks good!
            </div>
        <div class="row mb-3" id="passwordHelp">
            <div class="invalid-feedback">
                Please select a valid state.
            </div>
        </div>
        </div>

            <div class="row mb-3" id="lowercase">
                <label class="col-form-label col-sm-2 pt-0">Include Lowercase Characters</label>
                <div class="col-sm-10">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="lowercase" name="lowercase">
                        <label class="form-check-label" for="lowercase"></label>
                            (e.g. abcdefg)
                        </label>
                    </div>
                </div>
            </div>

            <div class="row mb-3" id="Uppercase">
                <label class="col-form-label col-sm-2 pt-0">Include Uppercase Characters</label>
                <div class="col-sm-10">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="uppercase" name="uppercase">
                        <label class="form-check-label" for="uppercase">
                            (e.g. ABCDEFG)
                        </label>
                    </div>
                </div>
            </div>
        </fieldset>
       
        <div class="row mb-3" id="Numbers">
            <label class="col-form-label col-sm-2 pt-0">Include Numbers</label>
            <div class="col-sm-10">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="number" name="number">
                    <label class="form-check-label" for="number">
                        (e.g. 123456)
                    </label>
                </div>
            </div>
        </div>

        <div class="row mb-3" id="symbols">
            <label class="col-form-label col-sm-2 pt-0">Include Symbols</label>
            <div class="col-sm-10">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="symbol" name="symbol">
                    <label class="form-check-label" for="symbol">
                        (e.g. @#$%)
                    </label>
                </div>
            </div>
        </div>


    <div class="row mb-3">
        <label for="exclude" class="col-sm-2 col-form-label">Exclude Characters</label>
        <div class="col-sm-10">
            <input type="text" class="form-control" id="ExcludeChar" aria-describedby="excludeHelp">
            <div id="excludeHelp" class="form-text exclude">These characters will not appear in the password</div>
        </div>
    </div>

    <button type="submit" class="submit btn btn-success" id="submit-button">Generate Password</button>

        {{#if password}}
        <div class="password mb-3 p-3">
            <div>
                <h5 id="result">Your Password : <code id="password">{{password}}</code></h5>
            </div>
        </div>
        {{/if}}   
    </form>
</div>

<script>

    const form = document.querySelector('needs-validation')
    const lengthInput = document.querySelector('#length')
    const submitButton = document.querySelector('.submit')
    const passwordHelp = document.querySelector('#passwordHelp'); // Define passwordHelp

    form.addEventListener('submit', function onFormSubmitted(event) {
            console.log('Form submitted');
            if (!form.checkValidity()) {
                event.stopPropagation()
                event.preventDefault()
                console.log('Form invalid');
            }
            form.classList.add('was-validated')
    }, false)

    lengthInput.addEventListener('keyup',function(event){
        const length = parseInt(length.value)
        if(length < 4 || length > 16 ||length === 0){
            passwordHelp.classList.add('invalid-feedback')
            passwordHelp.classList.remove('valid-feedback')
            //alert('Please select a length between 4 - 16') ;
        }else{
            passwordHelp.classList.add('valid-feedback')
            passwordHelp.classList.remove('invalid-feedback')
        }
    })

     submitButton.addEventListener('click', function onSubmitButtonClicked(event) {
          if(form.classList.contain('invalid-feedback')){
            return 
          }
            form.submit()
        })
</script>
    


   